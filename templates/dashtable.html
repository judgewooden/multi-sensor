<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JPH Monitor</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css"
	  integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='jphStyle.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='font-awesome-4.7.0/css/font-awesome.min.css') }}">
</head>
<!--
id's are: Codifier +
b = box
h = header
c = console menu
v = value of the Sensors
t = footer (for time value)
S = start icon
H = pause icon
P = heartbeat (ping)
C = line-chart
i = show an info bubble
-->
<body>
{% include "menubar.html" %}
<div style="position:relative;width:100%"></div>
<div class="container-fluid">
<table id="jphTable" class="cell-border hover order-column nowrap" width="100%">
	<thead>
		<tr>
			<th>Codifier</th>
			<th>Name</th>
			<th>Value</th>
			<th>Symbol</th>
			<th>DTimestamp</th>
			<th>SensorInterval</th>
			<th>ITimestamp</th>
			<th>TimoutWarning</th>
			<th>Type</th>
			<th>Name</th>
			<th>IsActive</th>
			<th>DResetTime</th>
			<th>DPacketsLost</th>
			<th>CPacketsLost</th>
			<th>CResetTime</th>
			<th>TRequest</th>
			<th>TTimestamp</th>
			<th>TDuration</th>
		</tr>
	</thead>
	<tbody>
{% for sensor in sensors %}		
		<tr>
			<td class="dt-center">{{ sensor.Codifier }}</td>
			<td class="dt-left">{{ sensor.ShortName }}</td>
			<td class="dt-right" data-type="float">{{ sensor.Value }}</td>
			<td class="dt-centre">{{ sensor.Symbol }}</td>
			<td class="dt-centre" data-type="timestamp">{{ sensor.DTimestamp }}</td>
			<td class="dt-right">{{ sensor.SensorInterval }}</td>
			<td class="dt-centre" data-type="timestamp">{{ sensor.ITimestamp }}</td>
			<td class="dt-right">{{ sensor.TimeoutWarning }}</td>
			<td class="dt-">{{ sensor.Type }}</td>
			<td class="dt-left">{{ sensor.Name }}</td>
			<td class="dt-center">{{ sensor.IsActive }}</td>
			<td class="dt-centre" data-type="timestamp">{{ sensor.DResetTime }}</td>
			<td class="dt-right">{{ sensor.DPacketsLost }}</td>
			<td class="dt-right">{{ sensor.CPacketsLost }}</td>
			<td class="dt-centre" data-type="timestamp">{{ sensor.CResetTime }}</td>
			<td class="dt-centre" data-type="timestamp">{{ sensor.TRequest }}</td>
			<td class="dt-centre data-type="timestamp">{{ sensor.TTimestamp }}</td>
			<td class="dt-centre">{{ sensor.TDuration }}</td>
		</tr>
{% endfor %}
	</tbody>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
<script src="{{ url_for('static', filename='jphCommon.js') }}"></script>
<script>
// 
// Format the data & table after loading
//
$(document).ready(function() {
	$('[data-type="float"]').each(function() {
		x=parseFloat($(this).html());
		$(this).html(afronden(x));
		$(this).addClass("right-align-class");
	})
	$('[data-type="timestamp"]').each(function() {
		x=parseInt($(this).html());
		if (x>0) {
			n=parseInt(Date.now());
			if (((n-x)/1000)<86400)
				$(this).html(time_ago(x));
			else
				$(this).html(dateFormat(x, "yy-mm-dd HH:MM:ss"))
		}
	});
  $('#jphTable').DataTable({
  	"lengthMenu": [[15, 30, 60, 120, 200, -1], [15, 30, 60, 120, 200, "All"]]
  });
})
</script>
</body>
</html>
